<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>阿莲读经典 - 智慧家长学堂</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <button class="header-btn menu-btn" id="menuBtn" aria-label="打开目录">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="3" y1="6" x2="21" y2="6"></line>
                <line x1="3" y1="12" x2="21" y2="12"></line>
                <line x1="3" y1="18" x2="21" y2="18"></line>
            </svg>
        </button>
        <div class="header-title">
            <span class="logo-icon">莲</span>
            <span class="logo-text">阿莲读经典</span>
        </div>
        <button class="header-btn ai-btn" id="aiBtn" aria-label="打开AI助手">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M12 2L15.09 8.26L22 9.27L17 14.14L18.18 21.02L12 17.77L5.82 21.02L7 14.14L2 9.27L8.91 8.26L12 2Z"></path>
            </svg>
        </button>
    </header>

    <!-- Main Content Area -->
    <main class="main-content">
        <!-- Chapter Navigation Sidebar -->
        <aside class="sidebar sidebar-left" id="sidebarLeft">
            <div class="sidebar-header">
                <h2>《大学》章句</h2>
                <button class="close-btn" id="closeMenuBtn" aria-label="关闭目录">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            <nav class="chapter-list" id="chapterNav">
                <!-- Chapters populated by JS -->
            </nav>
        </aside>

        <!-- Center Content -->
        <section class="content-area">
            <div class="chapter-header" id="chapterHeader">
                <h1 id="chapterTitle">经一章</h1>
                <p class="chapter-subtitle" id="chapterSubtitle">释明明德·亲民·止于至善</p>
            </div>
            <article class="text-area" id="textContent">
                <!-- Text paragraphs populated by JS -->
            </article>
            <div class="content-hint">
                <span>👆 点击段落获取智慧解读</span>
            </div>
        </section>

        <!-- AI Assistant Sidebar -->
        <aside class="sidebar sidebar-right" id="sidebarRight">
            <div class="sidebar-header ai-header">
                <div class="ai-title">
                    <span class="ai-icon">✦</span>
                    <h2>智慧家长助手</h2>
                </div>
                <button class="close-btn" id="closeAiBtn" aria-label="关闭AI助手">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="18" y1="6" x2="6" y2="18"></line>
                        <line x1="6" y1="6" x2="18" y2="18"></line>
                    </svg>
                </button>
            </div>
            
            <div class="ai-content" id="aiContent">
                <!-- Welcome State -->
                <div class="ai-welcome" id="aiWelcome">
                    <div class="welcome-icon">📖</div>
                    <h3>欢迎来到智慧家长学堂</h3>
                    <p class="welcome-desc">点击左侧原文段落，我将帮您更好的理解经典，让经典融入亲子教育</p>
                </div>
                
                <!-- Loading State -->
                <div class="ai-loading" id="aiLoading" style="display: none;">
                    <div class="spinner"></div>
                    <p>智慧解读生成中...</p>
                </div>
                
                <!-- Response State -->
                <div class="ai-response" id="aiResponse" style="display: none;">
                    <div class="selected-text">
                        <span class="label">当前选中</span>
                        <p id="selectedText"></p>
                    </div>
                    
                    <div class="response-card">
                        <div class="card-header">
                            <span>📝</span> 白话文解释
                        </div>
                        <div class="card-body" id="explanationContent"></div>
                    </div>
                    
                    <div class="response-card">
                        <div class="card-header">
                            <span>💡</span> 家庭教育智慧
                        </div>
                        <div class="card-body" id="principleContent"></div>
                    </div>
                    
                    <div class="response-card negative">
                        <div class="card-header">
                            <span>👤</span> 普通家长案例
                        </div>
                        <div class="card-body" id="negativeCaseContent"></div>
                    </div>
                    
                    <div class="response-card positive">
                        <div class="card-header">
                            <span>✨</span> 智慧家长案例
                        </div>
                        <div class="card-body" id="positiveCaseContent"></div>
                    </div>
                </div>
                
                <!-- Error State -->
                <div class="ai-error" id="aiError" style="display: none;">
                    <div class="error-icon">⚠️</div>
                    <p id="errorMessage">请求失败，请稍后重试</p>
                    <button class="retry-btn" id="retryBtn">重新解读</button>
                </div>
            </div>
        </aside>
    </main>

    <!-- Overlay for mobile -->
    <div class="overlay" id="overlay"></div>

    <script src="app.js"></script>
</body>
</html>
